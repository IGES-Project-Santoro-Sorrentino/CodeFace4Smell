[mysqld]
# Enable local infile for R scripts
local_infile = 1

# Other recommended settings for codeface
default_authentication_plugin = mysql_native_password
sql_mode = "STRICT_TRANS_TABLES,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO"

# Connection timeouts - critical for long-running analyses
wait_timeout = 86400
interactive_timeout = 86400
net_read_timeout = 600
net_write_timeout = 600
connect_timeout = 60

# Maximum connections - important for parallel analysis
max_connections = 200
max_connect_errors = 10000

# Buffer pool settings - prevent OOM and improve performance
# Use 50% of available memory (adjust based on container memory)
innodb_buffer_pool_size = 512M
innodb_buffer_pool_instances = 4
innodb_log_file_size = 128M
innodb_log_buffer_size = 16M

# Query cache (deprecated in MySQL 8.0, but safe to include)
# InnoDB settings for better performance
innodb_flush_log_at_trx_commit = 2
innodb_flush_method = O_DIRECT

# Prevent connection loss during long queries
max_allowed_packet = 256M

# Logging for debugging (optional - can be disabled in production)
# log_error = /var/log/mysql/error.log
# slow_query_log = 1
# long_query_time = 10

[mysql]
# Enable local infile on client side
local_infile = 1
connect_timeout = 60

[client]
# Enable local infile on client side
local_infile = 1
connect_timeout = 60
